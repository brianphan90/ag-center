{"remainingRequest":"/Users/brianphan/jets/kf-grower-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/brianphan/jets/kf-grower-portal/src/components/charts/LineChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/brianphan/jets/kf-grower-portal/src/components/charts/LineChart.vue","mtime":1617734622980},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmb3JtYXROdW1iZXIgZnJvbSAnQC9saWIvdXRpbHMvZm9ybWF0TnVtYmVyJzsKaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnOwppbXBvcnQgY29sb3JzIGZyb20gJ0AvYXNzZXRzL2pzL2NvbG9ycyc7CmltcG9ydCBCYXNlQ2hhcnQgZnJvbSAnLi9CYXNlQ2hhcnQnOwoKZXhwb3J0IGRlZmF1bHQgewoJbmFtZSA6ICdsaW5lLWNoYXJ0JywKCglleHRlbmRzIDogQmFzZUNoYXJ0LAoKCXByb3BzIDogewoJCWNoYXJ0IDogewoJCQl0eXBlIDogT2JqZWN0LAoJCX0sCgl9LAoKCWRhdGEgOiAoKSA9PiAoIHsKCQkvLyBub3RoaW5nIHlldAoJfSApLAoKCWNvbXB1dGVkIDogewoJCXRvdGFsKCkgewoJCQljb25zdCB7IGRhdGEgfSA9IHRoaXMuY2hhcnQ7CgkJCWNvbnN0IHRvdGFsICAgID0gZGF0YS5yZWR1Y2UoICggc3VtLCBpdGVtICkgPT4gc3VtICsgaXRlbS52YWx1ZSwgMCApOwoKCQkJY29uc29sZS5sb2coIHRvdGFsICk7CgoJCQlyZXR1cm4gZm9ybWF0TnVtYmVyKCB0b3RhbCApOwoJCX0sCgkJbGFzdFVwZGF0ZWQoKSB7CgkJCWNvbnN0IHsgdXBkYXRlZEF0IH0gPSB0aGlzLmNoYXJ0OwoKCQkJcmV0dXJuIGZvcm1hdCggbmV3IERhdGUoIHVwZGF0ZWRBdCApLCAnTExMTCBkbywgeXl5eScgKTsKCQl9Cgl9LAoKCW1vdW50ZWQoKSB7CgkJdGhpcy5pbml0KCB0aGlzLiRyZWZzLnN2ZyApOwoJfSwKCgltZXRob2RzIDogewoKCQlkcmF3KCkgewoKCQkJLy8gZ2V0IGRhdGEgcmFuZ2UKCQkJY29uc3QgeVZhbHVlcyA9IHRoaXMuY2hhcnQuZGF0YS5tYXAoIGRhdHVtID0+IGRhdHVtLnZhbHVlICk7CgkJCWNvbnN0IHJhbmdlICAgPSB0aGlzLmdldERhdGFSYW5nZSggeVZhbHVlcyApOwoKCQkJY29uc29sZS5sb2coIHJhbmdlICk7CgkJCS8vIGRyYXcgeS1heGlzIGxhYmVscwoJCQl0aGlzLmRyYXdBeGlzSW5kaWNhdG9ycyggewoJCQkJYXhpcyAgICAgICAgICAgOiAneS1yaWdodCcsCgkJCQl0cmFuc2Zvcm1MYWJlbCA6IHRleHQgPT4gZm9ybWF0TnVtYmVyKCB0ZXh0ICksCgkJCQlsaW5lcyAgICAgICAgICA6IHsKCQkJCQludW1iZXJPZkluZGljYXRvcnMgICAgICAgICA6IDUsCgkJCQkJc3BhY2VCZXR3ZWVuTGFiZWxzQW5kTGluZXMgOiAxMCwKCQkJCX0sCgkJCQljb2xvciA6IGNvbG9ycy5jb2xvclByaW1hcnksCgkJCQlyYW5nZSwKCQkJfSApOwoKCQkJLy8gZHJhdyB4LWF4aXMgbGFiZWxzCgkJCWNvbnN0IHhBeGlzRGF0YSA9IHRoaXMuZHJhd0F4aXNJbmRpY2F0b3JzKCB7CgkJCQlheGlzICAgICAgICAgICAgICAgICAgICAgICA6ICd4LWJvdHRvbScsCgkJCQl2YWx1ZXMgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuY2hhcnQuZGF0YSwKCQkJCXNwYWNlQmV0d2VlbkxhYmVsc0FuZENoYXJ0IDogMTAsCgkJCQlsYWJlbFN0eWxlICAgICAgICAgICAgICAgICA6IFsKCQkJCQlbJ2ZvbnQtc2l6ZScsICcxNHB4J10sCgkJCQkJWydmb250LXdlaWdodCcsICc3MDAnXSwKCQkJCQlbJ2ZvbnQtZmFtaWx5JywgJyJNYW5qYXJpIiwgc2Fucy1zZXJpZiddLAoJCQkJXSwKCQkJfSApOwoKCQkJLy8gZHJhdyBsaW5lIGFuZCBzaGFkZWQKCQkJLy8gYXJlYSB1bmRlciBjaGFydAoJCQl0aGlzLmRyYXdTaGFkZWRMaW5lKCB4QXhpc0RhdGEsIHJhbmdlICk7CgkJCWNvbnNvbGUubG9nKCB4QXhpc0RhdGEgKTsKCQkJLy8gZHJhdyBwb2ludHMKCQkJdGhpcy5kcmF3UG9pbnRzKCB4QXhpc0RhdGEsIHJhbmdlICk7CgkJfSwKCgkJZHJhd1NoYWRlZExpbmUoIHhBeGlzRGF0YSwgcmFuZ2UgKSB7CgkJCWlmICggeEF4aXNEYXRhLmxlbmd0aCA8IDIgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWNvbnN0IFtwb2ludE9uZSwgcG9pbnRUd29dID0geEF4aXNEYXRhCgkJCQkuc2xpY2UoIDAsIDIgKQoJCQkJLm1hcCggcG9pbnQgPT4gKCB7CgkJCQkJeCA6IHBvaW50LngsCgkJCQkJeSA6ICgpID0+IHRoaXMuZ2V0WVZhbHVlKCBwb2ludC52YWx1ZSwgcmFuZ2UgKSwKCQkJCX0gKSApOwoKCQkJY29uc3QgZk9mRmlyc3RMaW5lID0gdGhpcy5nZXRMaW5lYXJGdW5jdGlvbkZyb21Ud29Qb2ludHMoIHBvaW50T25lLCBwb2ludFR3byApOwoKCQkJY29uc3QgW3NlY29uZExhc3RQb2ludCwgbGFzdFBvaW50XSA9IHhBeGlzRGF0YQoJCQkJLnNsaWNlKCB4QXhpc0RhdGEubGVuZ3RoIC0gMiwgeEF4aXNEYXRhLmxlbmd0aCApCgkJCQkubWFwKCBwb2ludCA9PiAoIHsKCQkJCQl4IDogcG9pbnQueCwKCQkJCQl5IDogKCkgPT4gdGhpcy5nZXRZVmFsdWUoIHBvaW50LnZhbHVlLCByYW5nZSApLAoJCQkJfSApICk7CgoJCQljb25zdCBmT2ZTZWNvbmRMaW5lID0gdGhpcy5nZXRMaW5lYXJGdW5jdGlvbkZyb21Ud29Qb2ludHMoIHNlY29uZExhc3RQb2ludCwgbGFzdFBvaW50ICk7CgoJCQljb25zdCBsaW5lUG9pbnRzID0geEF4aXNEYXRhLm1hcCggKCBkYXR1bSwgaSApID0+ICggewoJCQkJeSA6ICggKCkgPT4gewoJCQkJCWlmICggaSA9PT0gMCApIHsKCQkJCQkJcmV0dXJuIGZPZkZpcnN0TGluZSggdGhpcy5sICk7CgkJCQkJfQoKCQkJCQlpZiAoIGkgPT09IHhBeGlzRGF0YS5sZW5ndGggLSAxICkgewoJCQkJCQlyZXR1cm4gZk9mU2Vjb25kTGluZSggdGhpcy5sICsgdGhpcy5hdyApOwoJCQkJCX0KCgkJCQkJcmV0dXJuIHRoaXMuZ2V0WVZhbHVlKCBkYXR1bS52YWx1ZSwgcmFuZ2UgKTsKCQkJCX0gKSgpLAoJCQkJeCA6ICggKCkgPT4gewoJCQkJCWlmICggaSA9PT0gMCApIHsKCQkJCQkJcmV0dXJuIHRoaXMubDsKCQkJCQl9CgoJCQkJCWlmICggaSA9PT0geEF4aXNEYXRhLmxlbmd0aCAtIDEgKSB7CgkJCQkJCXJldHVybiB0aGlzLmwgKyB0aGlzLmF3OwoJCQkJCX0KCgkJCQkJcmV0dXJuIGRhdHVtLngoKTsKCQkJCX0gKSgpLAoJCQl9ICkgKTsKCgkJCWNvbnN0IHN0YXJ0UG9pbnQgPSB7CgkJCQl4IDogdGhpcy5sLAoJCQkJeSA6IHRoaXMudCArIHRoaXMuYWgsCgkJCX07CgoJCQljb25zdCBlbmRQb2ludCA9IHsKCQkJCXggOiB0aGlzLmwgKyB0aGlzLmF3LAoJCQkJeSA6IHRoaXMudCArIHRoaXMuYWgsCgkJCX07CgoJCQljb25zdCBwb2ludHMgPSBbCgkJCQlzdGFydFBvaW50LAoJCQkJLi4ubGluZVBvaW50cywKCQkJCWVuZFBvaW50LAoJCQldOwoKCQkJdGhpcy5jYW52YXMKCQkJCS5hcHBlbmQoICdwYXRoJyApCgkJCQkuYXR0ciggJ2QnLCB0aGlzLnBhdGhGcm9tUG9pbnRzKCBwb2ludHMgKSApCgkJCQkuc3R5bGUoICdmaWxsJywgYHVybCgjZ3JhZGllbnQtJHt0aGlzLmlkfSlgICk7IC8vIGxvb2sgaW4gbWFyayB1cAoJCX0sCgoJCWRyYXdQb2ludHMoIHhBeGlzRGF0YSwgcmFuZ2UgKSB7CgkJCWNvbnN0IGxpbmVQb2ludHMgPSB4QXhpc0RhdGEubWFwKCBkYXR1bSA9PiAoIHsKCQkJCXggOiBkYXR1bS54KCksCgkJCQl5IDogdGhpcy5nZXRZVmFsdWUoIGRhdHVtLnZhbHVlLCByYW5nZSApLAoJCQl9ICkgKTsKCgkJCXRoaXMuY2FudmFzCgkJCQkuYXBwZW5kKCAncGF0aCcgKQoJCQkJLmF0dHIoICdkJywgdGhpcy5wYXRoRnJvbVBvaW50cyggbGluZVBvaW50cywgZmFsc2UgKSApCgkJCQkuc3R5bGUoICdzdHJva2Utd2lkdGgnLCAnNHB4JyApCgkJCQkuc3R5bGUoICdzdHJva2UnLCBjb2xvcnMuY29sb3JBY2NlbnQgKQoJCQkJLnN0eWxlKCAnZmlsbCcsICd0cmFuc3BhcmVudCcgKTsKCgkJCXRoaXMuY2FudmFzCgkJCQkuc2VsZWN0QWxsKCAnLnBvaW50cycgKQoJCQkJLmRhdGEoIHhBeGlzRGF0YSApCgkJCQkuZW50ZXIoKQoJCQkJLmFwcGVuZCggJ2NpcmNsZScgKQoJCQkJLmF0dHIoICdjeCcsIGQgPT4gZC54KCkgKQoJCQkJLmF0dHIoICdjeScsIGQgPT4gdGhpcy5nZXRZVmFsdWUoIGQudmFsdWUsIHJhbmdlICkgKQoJCQkJLmF0dHIoICdyJywgJzUnICkKCQkJCS5zdHlsZSggJ3N0cm9rZS13aWR0aCcsICc0cHgnICkKCQkJCS5zdHlsZSggJ3N0cm9rZScsIGQgPT4gZC5jb2xvciApCgkJCQkuc3R5bGUoICdmaWxsJywgY29sb3JzLmJnQ29sb3IgKTsKCQl9CgoJfQp9Owo="},{"version":3,"sources":["LineChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"LineChart.vue","sourceRoot":"src/components/charts","sourcesContent":["<template lang='pug'>\n.line-chart(:id='id')\n\taside\n\t\tlegend\n\t\t\th1 {{ total }}\n\t\t\th2 {{ chart.label }}\n\t\tfooter\n\t\t\tp\n\t\t\t\tspan Last updated\n\t\t\t\tspan {{ lastUpdated }}\n\t//- can now be found by\n\t//- using this.$refs.svg\n\tsvg(ref='svg')\n\t\tdefs\n\t\t\tlinearGradient(:id='`gradient-${id}`' :x1=\"l\" :y1=\"t\" :x2=\"l + aw\" :y2=\"t\" gradientUnits=\"userSpaceOnUse\")\n\t\t\t\tstop(stop-color=\"#EED667\" stop-opacity=\"0\")\n\t\t\t\tstop(offset=\"0.128101\" stop-color=\"#EED667\" stop-opacity=\"0.19\")\n\t\t\t\tstop(offset=\"0.8698\" stop-color=\"#EED667\" stop-opacity=\"0.19\")\n\t\t\t\tstop(offset=\"1\" stop-color=\"#EED667\" stop-opacity=\"0\")\n</template>\n\n<script>\nimport formatNumber from '@/lib/utils/formatNumber';\nimport { format } from 'date-fns';\nimport colors from '@/assets/js/colors';\nimport BaseChart from './BaseChart';\n\nexport default {\n\tname : 'line-chart',\n\n\textends : BaseChart,\n\n\tprops : {\n\t\tchart : {\n\t\t\ttype : Object,\n\t\t},\n\t},\n\n\tdata : () => ( {\n\t\t// nothing yet\n\t} ),\n\n\tcomputed : {\n\t\ttotal() {\n\t\t\tconst { data } = this.chart;\n\t\t\tconst total    = data.reduce( ( sum, item ) => sum + item.value, 0 );\n\n\t\t\tconsole.log( total );\n\n\t\t\treturn formatNumber( total );\n\t\t},\n\t\tlastUpdated() {\n\t\t\tconst { updatedAt } = this.chart;\n\n\t\t\treturn format( new Date( updatedAt ), 'LLLL do, yyyy' );\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.init( this.$refs.svg );\n\t},\n\n\tmethods : {\n\n\t\tdraw() {\n\n\t\t\t// get data range\n\t\t\tconst yValues = this.chart.data.map( datum => datum.value );\n\t\t\tconst range   = this.getDataRange( yValues );\n\n\t\t\tconsole.log( range );\n\t\t\t// draw y-axis labels\n\t\t\tthis.drawAxisIndicators( {\n\t\t\t\taxis           : 'y-right',\n\t\t\t\ttransformLabel : text => formatNumber( text ),\n\t\t\t\tlines          : {\n\t\t\t\t\tnumberOfIndicators         : 5,\n\t\t\t\t\tspaceBetweenLabelsAndLines : 10,\n\t\t\t\t},\n\t\t\t\tcolor : colors.colorPrimary,\n\t\t\t\trange,\n\t\t\t} );\n\n\t\t\t// draw x-axis labels\n\t\t\tconst xAxisData = this.drawAxisIndicators( {\n\t\t\t\taxis                       : 'x-bottom',\n\t\t\t\tvalues                     : this.chart.data,\n\t\t\t\tspaceBetweenLabelsAndChart : 10,\n\t\t\t\tlabelStyle                 : [\n\t\t\t\t\t['font-size', '14px'],\n\t\t\t\t\t['font-weight', '700'],\n\t\t\t\t\t['font-family', '\"Manjari\", sans-serif'],\n\t\t\t\t],\n\t\t\t} );\n\n\t\t\t// draw line and shaded\n\t\t\t// area under chart\n\t\t\tthis.drawShadedLine( xAxisData, range );\n\t\t\tconsole.log( xAxisData );\n\t\t\t// draw points\n\t\t\tthis.drawPoints( xAxisData, range );\n\t\t},\n\n\t\tdrawShadedLine( xAxisData, range ) {\n\t\t\tif ( xAxisData.length < 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst [pointOne, pointTwo] = xAxisData\n\t\t\t\t.slice( 0, 2 )\n\t\t\t\t.map( point => ( {\n\t\t\t\t\tx : point.x,\n\t\t\t\t\ty : () => this.getYValue( point.value, range ),\n\t\t\t\t} ) );\n\n\t\t\tconst fOfFirstLine = this.getLinearFunctionFromTwoPoints( pointOne, pointTwo );\n\n\t\t\tconst [secondLastPoint, lastPoint] = xAxisData\n\t\t\t\t.slice( xAxisData.length - 2, xAxisData.length )\n\t\t\t\t.map( point => ( {\n\t\t\t\t\tx : point.x,\n\t\t\t\t\ty : () => this.getYValue( point.value, range ),\n\t\t\t\t} ) );\n\n\t\t\tconst fOfSecondLine = this.getLinearFunctionFromTwoPoints( secondLastPoint, lastPoint );\n\n\t\t\tconst linePoints = xAxisData.map( ( datum, i ) => ( {\n\t\t\t\ty : ( () => {\n\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\treturn fOfFirstLine( this.l );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( i === xAxisData.length - 1 ) {\n\t\t\t\t\t\treturn fOfSecondLine( this.l + this.aw );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.getYValue( datum.value, range );\n\t\t\t\t} )(),\n\t\t\t\tx : ( () => {\n\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\treturn this.l;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( i === xAxisData.length - 1 ) {\n\t\t\t\t\t\treturn this.l + this.aw;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn datum.x();\n\t\t\t\t} )(),\n\t\t\t} ) );\n\n\t\t\tconst startPoint = {\n\t\t\t\tx : this.l,\n\t\t\t\ty : this.t + this.ah,\n\t\t\t};\n\n\t\t\tconst endPoint = {\n\t\t\t\tx : this.l + this.aw,\n\t\t\t\ty : this.t + this.ah,\n\t\t\t};\n\n\t\t\tconst points = [\n\t\t\t\tstartPoint,\n\t\t\t\t...linePoints,\n\t\t\t\tendPoint,\n\t\t\t];\n\n\t\t\tthis.canvas\n\t\t\t\t.append( 'path' )\n\t\t\t\t.attr( 'd', this.pathFromPoints( points ) )\n\t\t\t\t.style( 'fill', `url(#gradient-${this.id})` ); // look in mark up\n\t\t},\n\n\t\tdrawPoints( xAxisData, range ) {\n\t\t\tconst linePoints = xAxisData.map( datum => ( {\n\t\t\t\tx : datum.x(),\n\t\t\t\ty : this.getYValue( datum.value, range ),\n\t\t\t} ) );\n\n\t\t\tthis.canvas\n\t\t\t\t.append( 'path' )\n\t\t\t\t.attr( 'd', this.pathFromPoints( linePoints, false ) )\n\t\t\t\t.style( 'stroke-width', '4px' )\n\t\t\t\t.style( 'stroke', colors.colorAccent )\n\t\t\t\t.style( 'fill', 'transparent' );\n\n\t\t\tthis.canvas\n\t\t\t\t.selectAll( '.points' )\n\t\t\t\t.data( xAxisData )\n\t\t\t\t.enter()\n\t\t\t\t.append( 'circle' )\n\t\t\t\t.attr( 'cx', d => d.x() )\n\t\t\t\t.attr( 'cy', d => this.getYValue( d.value, range ) )\n\t\t\t\t.attr( 'r', '5' )\n\t\t\t\t.style( 'stroke-width', '4px' )\n\t\t\t\t.style( 'stroke', d => d.color )\n\t\t\t\t.style( 'fill', colors.bgColor );\n\t\t}\n\n\t}\n};\n</script>\n\n<style lang='scss'>\n.line-chart {\n\tdisplay: flex;\n\talign-items: stretch;\n\twidth: 100%;\n\n\taside {\n\t\t// display: flex;\n\t\t// flex-direction: column;\n\t\tjustify-content: space-between;\n\t\t// flex: 1 1 0;\n\n\t\tlegend {\n\t\t\ttext-align: left;\n\n\t\t\th1,\n\t\t\th2 {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\n\t\t\th1 {\n\t\t\t\tfont-weight: 700;\n\t\t\t\tcolor: $color-accent;\n\t\t\t}\n\n\t\t\th2 {\n\t\t\t\tfont-family: \"Manjari\", sans-serif;\n\t\t\t\tfont-size: 18px;\n\t\t\t\tfont-weight: 400;\n\t\t\t}\n\t\t}\n\n\t\tfooter p {\n\t\t\tfont-family: 'Manjari', sans-serif;\n\t\t\ttext-align: left;\n\t\t\tfont-size: 12px;\n\n\t\t\tspan {\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\t\t}\n\t}\n\n\tsvg {\n\t\tflex: 2 2 0;\n\t}\n}\n</style>\n"]}]}