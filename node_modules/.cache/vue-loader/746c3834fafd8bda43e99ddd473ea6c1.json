{"remainingRequest":"/Users/brianphan/jets/kf-grower-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/brianphan/jets/kf-grower-portal/src/components/charts/BarChart.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/brianphan/jets/kf-grower-portal/src/components/charts/BarChart.vue","mtime":1617815454742},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/kf-grower-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5iYXItY2hhcnQgewoJZGlzcGxheTogZmxleDsKCWFsaWduLWl0ZW1zOiBzdHJldGNoOwoJd2lkdGg6IDEwMCU7CgoJYXNpZGUgewoJCWRpc3BsYXk6IGZsZXg7CgkJZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKCQlqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CgkJZmxleDogMSAxIDA7CgoJCWxlZ2VuZCB7CgkJCXRleHQtYWxpZ246IGxlZnQ7CgoJCQloMSwKCQkJaDIgewoJCQkJZGlzcGxheTogaW5saW5lLWJsb2NrOwoJCQkJdGV4dC1hbGlnbjogbGVmdDsKCQkJfQoKCQkJaDEgewoJCQkJZm9udC13ZWlnaHQ6IDcwMDsKCQkJCWNvbG9yOiAkY29sb3ItYWNjZW50OwoJCQl9CgoJCQloMiB7CgkJCQlmb250LWZhbWlseTogIk1hbmphcmkiLCBzYW5zLXNlcmlmOwoJCQkJZm9udC1zaXplOiAxOHB4OwoJCQkJZm9udC13ZWlnaHQ6IDQwMDsKCQkJfQoJCX0KCgkJZm9vdGVyIHAgewoJCQlmb250LWZhbWlseTogJ01hbmphcmknLCBzYW5zLXNlcmlmOwoJCQl0ZXh0LWFsaWduOiBsZWZ0OwoJCQlmb250LXNpemU6IDEycHg7CgoJCQlzcGFuIHsKCQkJCWRpc3BsYXk6IGlubGluZS1ibG9jazsKCQkJfQoJCX0KCX0KCglzdmcgewoJCWZsZXg6IDIgMiAwOwoJfQp9Cg=="},{"version":3,"sources":["BarChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"BarChart.vue","sourceRoot":"src/components/charts","sourcesContent":["<template lang='pug'>\n.bar-chart(:id='id')\n\tsvg(ref='svg')\n\t\tdefs\n\t\t\tlinearGradient(:id='`gradient-${id}`' :x1=\"l\" :y1=\"t\" :x2=\"l + aw\" :y2=\"t\" gradientUnits=\"userSpaceOnUse\")\n\t\t\t\tstop(stop-color=\"#EED667\" stop-opacity=\"0\")\n\t\t\t\tstop(offset=\"0.128101\" stop-color=\"#EED667\" stop-opacity=\"0.19\")\n\t\t\t\tstop(offset=\"0.8698\" stop-color=\"#EED667\" stop-opacity=\"0.19\")\n\t\t\t\tstop(offset=\"1\" stop-color=\"#EED667\" stop-opacity=\"0\")\n</template>\n\n<script>\nimport formatNumber from '@/lib/utils/formatNumber';\nimport { format } from 'date-fns';\nimport colors from '@/assets/js/colors';\nimport BaseChart from './BaseChart';\n\nexport default {\n\tname : 'bar-chart',\n\n\textends : BaseChart,\n\n\tprops : {\n\t\tchart : {\n\t\t\ttype : Object,\n\t\t},\n\t},\n\n\tdata : () => ( {\n\t\t// nothing\n\t} ),\n\n\tcomputed : {\n\t\tnumOfBars() {\n\t\t\treturn Object.keys( this.chart.data ).length;\n\t\t},\n\t\tmaxBarWidth() {\n\t\t\tconst { aw, numOfBars } = this;\n\t\t\treturn aw / numOfBars;\n\t\t},\n\t\tbarWidth() {\n\t\t\tconst { maxBarWidth } = this;\n\t\t\treturn Math.min( maxBarWidth, 25 );\n\t\t},\n\t\tbarPadding() {\n\t\t\tconst { barWidth, numOfBars, aw } = this;\n\t\t\treturn ( aw - ( barWidth * numOfBars ) ) / numOfBars;\n\t\t},\n\t\trange() {\n\n\t\t\tconst values = this.chart.data.map( item => item.value );\n\t\t\tconst dataRange = this.getDataRange( values, false );\n\t\t\treturn {\n\t\t\t\tmin : dataRange.start,\n\t\t\t\tmax : dataRange.end\n\t\t\t};\n\n\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.init( this.$refs.svg );\n\t},\n\n\tmethods : {\n\n\t\tdraw() {\n\n\t\t\t// get data range\n\t\t\tconst yValues = this.chart.data.map( datum => datum.value );\n\t\t\tconst range   = this.getDataRange( yValues );\n\n\t\t\t// draw y-axis labels\n\t\t\tthis.drawAxisIndicators( {\n\t\t\t\taxis           : 'y-right',\n\t\t\t\ttransformLabel : text => formatNumber( text ),\n\t\t\t\tlines          : {\n\t\t\t\t\tnumberOfIndicators         : 5,\n\t\t\t\t\tspaceBetweenLabelsAndLines : 10,\n\t\t\t\t},\n\t\t\t\tcolor : colors.colorPrimary,\n\t\t\t\trange,\n\t\t\t} );\n\n\t\t\t// draw x-axis labels\n\t\t\tconst xAxisData = this.drawAxisIndicators( {\n\t\t\t\taxis                       : 'x-bottom',\n\t\t\t\tvalues                     : this.chart.data,\n\t\t\t\tspaceBetweenLabelsAndChart : 10,\n\t\t\t\tlabelStyle                 : [\n\t\t\t\t\t['font-size', '14px'],\n\t\t\t\t\t['font-weight', '700'],\n\t\t\t\t\t['font-family', '\"Manjari\", sans-serif'],\n\t\t\t\t],\n\t\t\t} );\n\t\t\tconsole.log( xAxisData );\n\t\t\tconsole.log( xAxisData.forEach( x => console.log( x.x() ) ) );\n\t\t\tconst barGroups = this.createBarGroup( this.chart.data );\n\t\t\tthis.drawBars( barGroups );\n\t\t},\n\n\t\tcreateBarGroup( barData ) {\n\t\t\treturn this.canvas.selectAll( `bars-${this.id}` )\n\t\t\t\t.data( barData )\n\t\t\t\t.enter()\n\t\t\t\t.append( 'g' );\n\t\t},\n\t\tdrawBars( barGroups ) {\n\t\t\tbarGroups\n\t\t\t\t.append( 'rect' )\n\t\t\t\t.attr( 'x', ( d, i ) => this.getX( i ) )\n\t\t\t\t.attr( 'y', d => this.getY( this.getHeight( d.value ) ) )\n\t\t\t\t.attr( 'fill', d => d.barColor )\n\t\t\t\t.attr( 'height', d => this.getHeight( d.value ) )\n\t\t\t\t.attr( 'width', d => this.barWidth );\n\t\t\treturn barGroups;\n\t\t},\n\n\t\tgetY( height ) {\n\t\t\tconst { ah, t } = this;\n\t\t\treturn ah + t - height;\n\t\t},\n\t\tgetX( i ) {\n\t\t\tconst { aw, l, barWidth } = this;\n\t\t\tconst ret = ( l + ( ( aw / ( this.chart.data.length + 1 ) ) * ( i + 1 ) ) ) - barWidth / 2;\n\t\t\tconsole.log( ret );\n\t\t\treturn ret;\n\t\t},\n\t\tgetTextX( i ) {\n\t\t\tconst {\n\t\t\t\tl,\n\t\t\t\tbarWidth,\n\t\t\t\tbarSpacing\n\t\t\t} = this;\n\t\t\treturn ( l + ( barWidth * i ) + ( barSpacing * i ) + ( barWidth / 2 ) ) + ( barSpacing / 2 );\n\t\t},\n\t\tgetHeight( value ) {\n\t\t\tconst { max } = this.range;\n\t\t\treturn ( value / max ) * this.ah;\n\t\t}\n\t}\n\n\n};\n</script>\n\n<style lang='scss'>\n.bar-chart {\n\tdisplay: flex;\n\talign-items: stretch;\n\twidth: 100%;\n\n\taside {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tflex: 1 1 0;\n\n\t\tlegend {\n\t\t\ttext-align: left;\n\n\t\t\th1,\n\t\t\th2 {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\n\t\t\th1 {\n\t\t\t\tfont-weight: 700;\n\t\t\t\tcolor: $color-accent;\n\t\t\t}\n\n\t\t\th2 {\n\t\t\t\tfont-family: \"Manjari\", sans-serif;\n\t\t\t\tfont-size: 18px;\n\t\t\t\tfont-weight: 400;\n\t\t\t}\n\t\t}\n\n\t\tfooter p {\n\t\t\tfont-family: 'Manjari', sans-serif;\n\t\t\ttext-align: left;\n\t\t\tfont-size: 12px;\n\n\t\t\tspan {\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\t\t}\n\t}\n\n\tsvg {\n\t\tflex: 2 2 0;\n\t}\n}\n</style>\n"]}]}